---
import Section from './Section.astro';
import SectionHeader from './SectionHeader.astro';

interface Props {
  imageUrl: string;
  imageAlt: string;
  position?: 'left' | 'right';
  title: string;
  text: string;
  buttonText: string;
  buttonLink: string;
  theme?: 'light' | 'dark';
}

const {
  imageUrl,
  imageAlt,
  position = 'left',
  title,
  text,
  buttonText,
  buttonLink,
  theme = 'dark'
} = Astro.props as Props;
---

<Section class={`two-column-section ${theme} ${position}`} aria-labelledby="imageblock-title">
  <div class="container">
    <div class="columns">
      <div class="image-container">
        <img src={imageUrl} alt={imageAlt} loading="lazy" />
      </div>
      <div class="content-container">
        <SectionHeader title={title} theme={theme} />
        <div class={`content-block ${theme}`}>
          <p>{text}</p>
          <a href={buttonLink} class="button">{buttonText}</a>
        </div>
      </div>
    </div>
  </div>
</Section>

<style>
  .two-column-section { padding: 4rem 2rem; }
  .container { max-width: 1200px; margin: 0 auto; }
  .columns { display: flex; flex-direction: column; gap: 2.5rem; }

  @media (min-width: 768px) {
    .columns { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8rem; align-items: stretch; }
    .two-column-section.right .columns { direction: rtl; }
    .two-column-section.right .content-container, .two-column-section.right .image-container { direction: ltr; }

    .image-container { aspect-ratio: 4 / 5; width: 100%; height: auto; overflow: hidden; display: flex; align-items: stretch; }
    .image-container img { width: 100%; height: 100%; object-fit: cover; display: block; border-radius: 0.5rem; }
    .content-container { display: flex; flex-direction: column; justify-content: center; padding: 0 0.25rem; }
  }

  .image-container img { width: 100%; height: auto; object-fit: cover; display: block; border-radius: 0.5rem; }

  .content-block { text-align: left; padding: 0.5rem 0; max-width: 56rem; }
  .content-block p { margin: 1rem 0; font-size: 1.125rem; line-height: 1.6; color: inherit; }

  .content-block.light p { color: var(--brand-dark); }
  .content-block.dark p { color: var(--color-bg); }

  .button { display: inline-block; padding: .6rem 1rem; border-radius: 6px; text-decoration: none; font-weight: 700; margin-top: .5rem; }

  .dark .button { background: var(--brand-yellow); color: var(--brand-dark); }
  .light .button { background: var(--brand-green); color: #fff; }
</style>
