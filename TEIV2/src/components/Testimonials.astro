---
import Section from './Section.astro';
import SectionHeader from './SectionHeader.astro';

const testimonials = [


 {
    quote: "Phoned the company this morning and Harry came out within a few hours to fit up three light fittings. Nothing was too much trouble, really polite and a nice genuine gentleman. I would highly recommend this company and I’m so pleased to now have a good contact for any other electrical work. Thank you.",
    author: "Rosanne Cowling",
  },
  {
    quote: "My neighbour needed an outside security light, she is elderly and didn’t know where to go or who to ring, I contacted THEM Electrical for her and they were absolutely fantastic, very professional, efficient, came out to look at the job, I couldn’t recommend them enough and my neighbour was extremely happy with the result, I would definitely recommend them.",
    author: "Sue Harvey",
  },
    {
    quote: "Harry is great. He gets back to you. He is willing to work with your schedule and does a quick clean quality work . I would recommend him to anyone who needs an electrician",
    author: "Tia Marie",
  },
  {
    quote: "Excellent company, I had no power to the house on a Sunday. I contacted THEM Electrical and they came out within half an hour. Harry was very thorough and fix the problem straight away. Thank you Harry",
    author: "Andrew Smith",
  },{
    quote: "Very high standard of work. Harry and Tom fitted a new suspended ceiling incorporating LED lighting along with new lighting, signage in our delicatessen. They accommodated us by working on a Sunday when our shop was closed. Both very pleasant young men who did an excellent job at a fair price.",
    author: "Dale Farm Foods - Leeds",
  },
  {
    quote: "I would definitely recommend this firm for all your electrical works. We have used them for both domestic and commercial work. Excellent customer service, high standard of work and competitively priced",
    author: "Julia Wood",
  }
];
---

<Section theme="dark">
  <div class="testimonials">
    <SectionHeader title="Testimonials" theme="dark"/>
    <div class="testimonials-container">
      <div class="testimonials-swiper swiper">
        <div class="swiper-wrapper">
          {testimonials.map(testimonial => (
            <div class="swiper-slide">
              <blockquote>
                <div class="quote-mark" aria-hidden="true">"</div>
                <p>"{testimonial.quote}"</p>
                <div class="author-section">
                  <div class="author-line"></div>
                  <div class="author">{testimonial.author}</div>
                </div>
              </blockquote>
            </div>
          ))}
        </div>
        <div class="swiper-button-prev" aria-label="Previous slide"></div>
        <div class="swiper-button-next" aria-label="Next slide"></div>
      </div>
    </div>
  </div>
</Section>

<style>
  .testimonials-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 0 2rem 1rem;
    overflow: hidden;
  }

  .testimonials-swiper {
    padding-bottom: 2rem;
    position: relative;
  }

  .swiper-slide {
    height: auto;
    display: flex;
  }

  blockquote {
    height: 100%;
    display: flex;
    flex-direction: column;
    margin: 0 0.5rem;
    background: linear-gradient(135deg, rgba(46, 46, 46, 0.95) 0%, rgba(38, 38, 38, 0.95) 100%);
    padding: 2rem 1.75rem;
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    position: relative;
    transition: all 0.4s ease;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
  }

  @media (min-width: 768px) {
    blockquote {
      padding: 2.25rem 2rem;
      margin: 0 1rem;
    }
  }

  blockquote:hover {
    border-color: rgba(253, 238, 33, 0.25);
    transform: translateY(-6px);
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(253, 238, 33, 0.1);
  }

  .quote-mark {
    display: none;
  }

  blockquote p {
    font-size: 1rem;
    line-height: 1.75;
    flex-grow: 1;
    margin: 0 0.75rem;
    position: relative;
    z-index: 1;
    color: rgba(255, 255, 255, 0.88);
    padding-top: 1rem;
  }

  blockquote p::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(
      90deg,
      var(--color-accent) 0%,
      var(--color-primary) 50%,
      transparent 100%
    );
  }

  @media (min-width: 768px) {
    blockquote p {
      font-size: 1.05rem;
    }
  }

  .author-section {
    margin-top: 1.5rem;
    padding-top: 1rem;
    position: relative;
    z-index: 1;
  }

  .author-line {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(
      270deg,
      var(--color-accent) 0%,
      var(--color-primary) 50%,
      transparent 100%
    );
  }

  .author {
    text-align: right;
    font-weight: 800;
    font-size: 0.9rem;
    letter-spacing: 0.5px;
    color: rgba(255, 255, 255, 0.85);
  }

  @media (min-width: 768px) {
    .author {
      font-size: 0.95rem;
    }
  }

  .swiper-button-next,
  .swiper-button-prev {
    width: 46px;
    height: 46px;
    border-radius: 50%;
    color: var(--brand-black);
    background: var(--color-accent);
    backdrop-filter: blur(8px);
    top: 50%;
    transform: translateY(-50%);
    transition: all 0.3s ease;
  }

  .swiper-button-next {
    right: 0;
  }

  .swiper-button-prev {
    left: 0;
  }

  .swiper-button-next :global(.swiper-navigation-icon),
  .swiper-button-prev :global(.swiper-navigation-icon) {
    width: 18px;
    height: 18px;
    fill: var(--brand-black);
  }

  .swiper-button-next::after,
  .swiper-button-prev::after {
    font-size: 18px;
    color: var(--brand-black);
  }

  .swiper-button-next:hover,
  .swiper-button-prev:hover {
    background: rgba(0, 0, 0, 0.5);
    color: var(--color-accent);
    transform: translateY(-50%) scale(1.1);
    box-shadow: 0 4px 16px rgba(253, 238, 33, 0.4);
  }

  .swiper-button-next:hover :global(.swiper-navigation-icon),
  .swiper-button-prev:hover :global(.swiper-navigation-icon) {
    fill: var(--color-accent);
  }

  .swiper-button-next:hover::after,
  .swiper-button-prev:hover::after {
    color: var(--color-accent);
  }

  @media (max-width: 767px) {
    .testimonials-container {
      padding: 2rem 1rem 4rem;
    }

    .swiper-button-next,
    .swiper-button-prev {
      display: none;
    }
  }
</style>

<script>
  import Swiper from 'swiper';
  import { Navigation, Autoplay } from 'swiper/modules';
  import 'swiper/css/bundle';

  document.addEventListener('DOMContentLoaded', function() {
    new Swiper('.testimonials-swiper', {
      modules: [Navigation, Autoplay],
      slidesPerView: 1,
      spaceBetween: 20,
      loop: true,
      autoplay: {
        delay: 5000,
        disableOnInteraction: false,
        pauseOnMouseEnter: true,
      },
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
      breakpoints: {
        768: {
          slidesPerView: 2,
          spaceBetween: 30,
        }
      }
    });
  });
</script>
